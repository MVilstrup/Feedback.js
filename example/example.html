<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>alertify.js - example page</title>
	<link rel="stylesheet" href="../themes/test.css" />
	<link rel="stylesheet" href="../themes/feedback.test.css" id="toggleCSS" />
	<meta name="viewport" content="width=device-width">
	<style>
		.feedback-log-custom {
			background: blue;
		}

		.side {
			float: left;
			width: 19%;
		}

		.main {
			width: 80%;
			margin-top: 50px;
			display: block;
			text-align: center;
		}
		table {
			width: 70%;
		}

		th, td {
			border: 1px solid #000;
		}
	</style>
</head>
<body>

	<div class="side">
		<h2>Dialogs</h2>

		<h2>Logs</h2>
		<a href="#" id="detailed_feed">Detailed feed log</a><br>
		<a href="#" id="simple_feed">Simple feed log</a><br>
	</div>
	<div class="main">
		<h3>This could easily be implemented server side</h3>
		<table>
			<thead>
				<tr>
					<th> User-ID </th>
					<th> Date </th>
					<th> Rating </th>
					<th> Description</th>
				</tr>
			</thead>
			<tbody id="tbody">
				
			</tbody>
		</table>
	</div>


	<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="../lib/feedback.js"></script>
	<script>
	$(document).ready(function(){
		var detailedFeedback = new FeedbackLog("");
		var simpleFeedback = new FeedbackLog({
			detailed : false
		})

		var userID = 1;

		// ==============================
		// Standard Dialogs
		$("#detailed_feed").click(function(){

			var row = document.createElement("tr");
			
			var id = document.createElement("td"); 
			var date = document.createElement("td");
			var rating = document.createElement("td"); 
			var description = document.createElement("td");

			id.innerHTML = "" + userID++;
			date.innerHTML = "" + new Date();



			detailedFeedback.show("How do you like this functionality?", function (e,str) {
				
				if(e){
					if (str){
						description.innerHTML = str;
					} else if ("opinion" in e) {
						switch(e.opinion) {
							case 1:
								rating.innerHTML = 1;
								break;
							case 0:
								rating.innerHTML = 0;
								break;
							case -1:
								rating.innerHTML = -1;
								break;
							default:
								rating.innerHTML = "";
								break;
						}
					}
				} else {
					description.innerHTML = "";
				}

			});

			row.appendChild(id);
			row.appendChild(date);
			row.appendChild(rating);
			row.appendChild(description);
			var base = document.getElementById('tbody');
			base.appendChild(row);
			

			return false;
		})

		$("#simple_feed").click(function(){

			var row = document.createElement("tr");
			
			var id = document.createElement("td"); 
			var date = document.createElement("td");
			var rating = document.createElement("td"); 
			var description = document.createElement("td");

			id.innerHTML = "" + userID++;
			date.innerHTML = "" + new Date();

			simpleFeedback.show("How do you like this functionality?", function (e,str) {

				switch(e.opinion) {
					case 1:
						rating.innerHTML = 1;
						break;
					case 0:
						rating.innerHTML = 0;
						break;
					case -1:
						rating.innerHTML = -1;
						break;
					default:
						rating.innerHTML = "";
						break;
				}
			});

			row.appendChild(id);
			row.appendChild(date);
			row.appendChild(rating);
			row.appendChild(description);
			var base = document.getElementById('tbody');
			base.appendChild(row);

			return false;
		})

	});
	</script>

</body>
</html>